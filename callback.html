<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Authenticating...</title>
    <style>
        body { font-family: sans-serif; background-color: #1a1a2e; color: #e0e0e0; text-align: center; padding-top: 50px; }
    </style>
</head>
<body>
    <h1>Authenticating...</h1>
    <p>Please wait, you are being redirected.</p>

    <script>
        // This script processes the token from the URL hash and saves it.
        const hashParams = new URLSearchParams(window.location.hash.substring(1));
        const twitchToken = hashParams.get('twitch_access_token');
        const idToken = hashParams.get('id_token');

        if (twitchToken && idToken) {
            const twitchAuth = { token: twitchToken, id_token: idToken };
            localStorage.setItem('twitchAuthTemp', JSON.stringify(twitchAuth));
        }

        // Redirect to the main application page.
        window.location.href = '/MultiStreamUpdater/';
    </script>
</body>
</html>